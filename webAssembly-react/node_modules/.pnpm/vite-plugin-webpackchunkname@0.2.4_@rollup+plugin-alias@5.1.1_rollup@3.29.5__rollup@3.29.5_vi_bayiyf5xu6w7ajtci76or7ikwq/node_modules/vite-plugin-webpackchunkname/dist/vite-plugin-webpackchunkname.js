"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("es-module-lexer"),n=require("magic-string"),r=require("@rollup/plugin-alias"),t=require("path"),u=require("@rollup/pluginutils");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(n),i=o(r);function l(e,n,r,t){return new(r||(r=Promise))((function(u,o){function a(e){try{l(t.next(e))}catch(e){o(e)}}function i(e){try{l(t.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?u(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,i)}l((t=t.apply(e,n||[])).next())}))}function c(e,n){var r,t,u,o,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(u=2&o[0]?t.return:o[0]?t.throw||((u=t.return)&&u.call(t),0):t.next)&&!(u=u.call(t,o[1])).done)return u;switch(t=0,u&&(o=[2&o[0],u.value]),o[0]){case 0:case 1:u=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,t=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(u=a.trys,(u=u.length>0&&u[u.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!u||o[1]>u[0]&&o[1]<u[3])){a.label=o[1];break}if(6===o[0]&&a.label<u[1]){a.label=u[1],u=o;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(o);break}u[2]&&a.ops.pop(),a.trys.pop();continue}o=n.call(e,a)}catch(e){o=[6,e],t=0}finally{r=u=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}function s(e){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&e[n],t=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,u,o=r.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(t=o.next()).done;)a.push(t.value)}catch(e){u={error:e}}finally{try{t&&!t.done&&(r=o.return)&&r.call(o)}finally{if(u)throw u.error}}return a}function d(e,n,r){if(r||2===arguments.length)for(var t,u=0,o=n.length;u<o;u++)!t&&u in n||(t||(t=Array.prototype.slice.call(n,0,u)),t[u]=n[u]);return e.concat(t||Array.prototype.slice.call(n))}var p=u.normalizePath(process.cwd()),h=new RegExp(p,"i"),v=new RegExp(p+"/(?!node_modules).*\\.[tj]s[x]?$","i"),y=/\?chunkName=([\w-.]*)/,m="common",b="vendor",w=null,g=function(e){return w[e]},x=function(e){w=e},k=null,S=function(e){return k[e]},N=function(e){k=e},E=new RegExp("\\.(css|less|sass|scss|styl|stylus|pcss|postcss)($|\\?)"),O=new Map;function C(e,n){var r,t=n.getModuleInfo,u=new Map,o=g(e),a=!!o,i=!h.test(e);if(a&&(r=e,!E.test(r))&&I(e,t,u)||i)return o&&!O.has(o.name)&&O.set(o.name,!0),b;var l=y.exec(e);if(l)return M(l[1]);if(!(t(e).importers.length<2)){if(o){var c=d([],f(o.chunkNames),!1),s=m;if(1===c.length)s=c[0];return O.has(s)&&(s=b),s}var p=S(e);if(p){var v=function(e){if(e.indexOf(m)>=0)return m;var n=e.filter((function(e){return e!==m}));switch(n.length){case 1:return n[0];case 2:return function(e){var n=f(e.sort((function(e,n){return e>n?1:e<n?-1:0})),2),r=n[0],t=n[1];return"shared/".concat(r,"/").concat(t)}(n);default:return m}}(d([],f(p.chunkNames),!1).filter(Boolean));return M(v)}}}function M(e){return e.replace(/\./g,"/")}function I(e,n,r,t){if(void 0===t&&(t=[]),r.has(e))return r.get(e);if(t.includes(e))return r.set(e,!1),!1;var u=n(e);if(!u)return r.set(e,!1),!1;if(u.isEntry)return r.set(e,!0),!0;var o=u.importers.some((function(u){return I(u,n,r,t.concat(e))}));return r.set(e,o),o}function j(e){var n="function"==typeof e?e:void 0;return function(e,r){if(n){var t=n(e,r);if(t)return t}return C(e,r)}}var q=/(webpackC|c)hunkName:\s*["']([\w-/.]+)["']/,P=/node_modules\/((@[^/]+\/)?[^/]+)/g,_=function(e){for(var n="",r=null;r=P.exec(e);)n=r[1];return n};function A(e,n,r){var t,u,o=[e],a=new Set;try{for(var i=s(o),l=i.next();!l.done;l=i.next()){var c=l.value,f=r[c];if(f)f.chunkNames.forEach((function(e){return a.add(e)}));else{var d=n(c),p=d.isEntry,h=d.importers;if(p)a.add(m);else if(0===h.length){var v=T(c);r[c]={chunkNames:new Set([v])},a.add(v)}else h.forEach((function(e){-1===o.indexOf(e)&&o.push(e)}))}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(u=i.return)&&u.call(i)}finally{if(t)throw t.error}}return a}var R=new Map;function T(e){var n=y.exec(e);if(n)return n[1];var r,u=(r=e,t.basename(r,t.extname(r)));if(R.has(u)){var o=R.get(u);return R.set(u,o+1),"".concat(u,"-").concat(o)}return R.set(u,1),u}exports.manualChunksPlugin=function(){var n,r,t=new Set,u=new Set;return{name:"manualNameChunksPlugin",apply:"build",load:function(e){return e.includes("node_modules")?t.add(e):h.test(e)&&u.add(e),null},configResolved:function(e){r=e},buildEnd:function(){var e=function(e,n){var r,t,u={};try{for(var o=s(e),a=o.next();!a.done;a=o.next()){var i=a.value;if(!u[i]){var l=A(i,n,u);u[i]={chunkNames:l}}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return u}(u,this.getModuleInfo),n=function(e,n){var r,t,u={},o=function(e){var r,t;if(!u[e]){var o=_(e);u[e]={chunkNames:new Set([o]),name:o}}var a=n(e).importedIds,i=new Set(a),l=function(r){u[r]||(u[r]={chunkNames:new Set,name:_(r)}),d([],f(u[e].chunkNames),!1).forEach((function(e){return u[r].chunkNames.add(e)})),((n(r)||{}).importedIds||[]).forEach((function(e){return i.add(e)}))};try{for(var c=(r=void 0,s(i)),p=c.next();!p.done;p=c.next()){l(p.value)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(t=c.return)&&t.call(c)}finally{if(r)throw r.error}}};try{for(var a=s(e),i=a.next();!i.done;i=a.next()){o(i.value)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(r)throw r.error}}return u}(t,this.getModuleInfo);x(n),N(e)},transform:function(t,u){return l(this,void 0,void 0,(function(){var o,i,l,s,f,d,p,h,y,m,b,w,g,x,k;return c(this,(function(c){switch(c.label){case 0:if(!(v.test(u)&&q.test(t)))return[3,6];o=new a.default(t),i=e.parse(t)[0],l=0,c.label=1;case 1:return l<i.length?(s=i[l],f=s.ss,d=s.se,p=s.s,h=s.e,y=s.n,m=t.slice(f,d),(b=q.exec(m))?(w=b[2].replace(/\//g,"."),g=y,n?[4,n.resolveId.call(this,y,u)]:[3,3]):[3,4]):[3,5];case 2:(x=c.sent())&&(g=x.id),c.label=3;case 3:k='"'.concat(g,"?").concat("chunkName","=").concat(w,'"'),o=o.overwrite(p,h,k),c.label=4;case 4:return l++,[3,1];case 5:return[2,{code:o.toString(),map:r.build.sourcemap?o.generateMap({includeContent:!0,hires:!0}):null}];case 6:return[2]}}))}))},config:function(e){e.build||(e.build={}),e.build.rollupOptions||(e.build.rollupOptions={}),e.build.rollupOptions.output||(e.build.rollupOptions.output={});var r=e.build.rollupOptions,t=r.output;Array.isArray(t)?r.output=t.map((function(e){return e.manualChunks=j(e.manualChunks),e})):Object.assign(e.build.rollupOptions.output,{manualChunks:j(t.manualChunks)});var u=e.resolve&&e.resolve.alias;u&&(n=i.default({entries:u}))}}};
//# sourceMappingURL=vite-plugin-webpackchunkname.js.map
